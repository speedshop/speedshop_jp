(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Pjax=a()})(function(){return function(){function a(e,f,d){function c(b,g){if(!f[b]){if(!e[b]){var l="function"==typeof require&&require;if(!g&&l)return l(b,!0);if(h)return h(b,!0);l=Error("Cannot find module '"+b+"'");throw l.code="MODULE_NOT_FOUND",l;}l=
f[b]={exports:{}};e[b][0].call(l.exports,function(d){return c(e[b][1][d]||d)},l,l.exports,a,e,f,d)}return f[b].exports}for(var h="function"==typeof require&&require,g=0;g<d.length;g++)c(d[g]);return c}return a}()({1:[function(a,e,f){var d=a("./lib/execute-scripts"),c=a("./lib/foreach-els"),h=a("./lib/parse-options");f=a("./lib/switches");var g=a("./lib/uniqueid"),b=a("./lib/events/on"),l=a("./lib/events/trigger"),r=a("./lib/util/clone"),k=a("./lib/util/contains"),n=a("./lib/util/extend"),p=a("./lib/util/noop"),
m=function(c){this.state={numPendingSwitches:0,href:null,options:null};this.options=h(c);this.log("Pjax options",this.options);this.options.scrollRestoration&&"scrollRestoration"in history&&(history.scrollRestoration="manual");this.maxUid=this.lastUid=g();this.parseDOM(document);b(window,"popstate",function(c){if(c.state){var b=r(this.options);b.url=c.state.url;b.title=c.state.title;b.history=!1;b.scrollPos=c.state.scrollPos;c.state.uid<this.lastUid?b.backward=!0:b.forward=!0;this.lastUid=c.state.uid;
this.loadUrl(c.state.url,b)}}.bind(this))};m.switches=f;m.prototype={log:a("./lib/proto/log"),getElements:function(c){return c.querySelectorAll(this.options.elements)},parseDOM:function(b){var d=a("./lib/proto/parse-element");c(this.getElements(b),d,this)},refresh:function(c){this.parseDOM(c||document)},reload:function(){window.location.reload()},attachLink:a("./lib/proto/attach-link"),forEachSelectors:function(c,b,d){return a("./lib/foreach-selectors").bind(this)(this.options.selectors,c,b,d)},switchSelectors:function(c,
b,d,h){return a("./lib/switches-selectors").bind(this)(this.options.switches,this.options.switchesOptions,c,b,d,h)},latestChance:function(c){window.location=c},onSwitch:function(){l(window,"resize scroll");this.state.numPendingSwitches--;0===this.state.numPendingSwitches&&this.afterAllSwitches()},loadContent:function(c,b){if("string"!==typeof c)l(document,"pjax:complete pjax:error",b);else{var d=document.implementation.createHTMLDocument("pjax"),h=/\s?[a-z:]+(?:=['"][^'">]+['"])*/gi,a=c.match(/<html[^>]+>/gi);
a&&a.length&&(a=a[0].match(h),a.length&&(a.shift(),a.forEach(function(c){c=c.trim().split("=");1===c.length?d.documentElement.setAttribute(c[0],!0):d.documentElement.setAttribute(c[0],c[1].slice(1,-1))})));d.documentElement.innerHTML=c;this.log("load content",d.documentElement.attributes,d.documentElement.innerHTML.length);if(document.activeElement&&k(document,this.options.selectors,document.activeElement))try{document.activeElement.blur()}catch(t){}this.switchSelectors(this.options.selectors,d,document,
b)}},abortRequest:a("./lib/abort-request"),doRequest:a("./lib/send-request"),handleResponse:a("./lib/proto/handle-response"),loadUrl:function(c,b){b="object"===typeof b?n({},this.options,b):r(this.options);this.log("load href",c,b);this.abortRequest(this.request);l(document,"pjax:send",b);this.request=this.doRequest(c,b,this.handleResponse.bind(this))},afterAllSwitches:function(){var b=Array.prototype.slice.call(document.querySelectorAll("[autofocus]")).pop();b&&document.activeElement!==b&&b.focus();
this.options.selectors.forEach(function(b){c(document.querySelectorAll(b),function(b){d(b)})});b=this.state;b.options.history&&(window.history.state||(this.lastUid=this.maxUid=g(),window.history.replaceState({url:window.location.href,title:document.title,uid:this.maxUid,scrollPos:[0,0]},document.title)),this.lastUid=this.maxUid=g(),window.history.pushState({url:b.href,title:b.options.title,uid:this.maxUid,scrollPos:[0,0]},b.options.title,b.href));this.forEachSelectors(function(b){this.parseDOM(b)},
this);l(document,"pjax:complete pjax:success",b.options);if(b.options.history){var a=document.createElement("a");a.href=this.state.href;if(a.hash){a=a.hash.slice(1);a=decodeURIComponent(a);b=0;if((a=document.getElementById(a)||document.getElementsByName(a)[0])&&a.offsetParent){do b+=a.offsetTop,a=a.offsetParent;while(a)}window.scrollTo(0,b)}else!1!==b.options.scrollTo&&(1<b.options.scrollTo.length?window.scrollTo(b.options.scrollTo[0],b.options.scrollTo[1]):window.scrollTo(0,b.options.scrollTo))}else b.options.scrollRestoration&&
b.options.scrollPos&&window.scrollTo(b.options.scrollPos[0],b.options.scrollPos[1]);this.state={numPendingSwitches:0,href:null,options:null}}};m.isSupported=a("./lib/is-supported");if(m.isSupported())e.exports=m;else{for(var q in m.prototype)m.prototype.hasOwnProperty(q)&&"function"===typeof m.prototype[q]&&(p[q]=p);e.exports=p}},{"./lib/abort-request":2,"./lib/events/on":4,"./lib/events/trigger":5,"./lib/execute-scripts":6,"./lib/foreach-els":7,"./lib/foreach-selectors":8,"./lib/is-supported":9,
"./lib/parse-options":10,"./lib/proto/attach-link":11,"./lib/proto/handle-response":12,"./lib/proto/log":13,"./lib/proto/parse-element":14,"./lib/send-request":15,"./lib/switches":17,"./lib/switches-selectors":16,"./lib/uniqueid":18,"./lib/util/clone":19,"./lib/util/contains":20,"./lib/util/extend":21,"./lib/util/noop":22}],2:[function(a,e,f){var d=a("./util/noop");e.exports=function(c){c&&4>c.readyState&&(c.onreadystatechange=d,c.abort())}},{"./util/noop":22}],3:[function(a,e,f){e.exports=function(d){var c=
d.text||d.textContent||d.innerHTML||"",a=d.src||"",g=d.parentNode||document.querySelector("head")||document.documentElement,b=document.createElement("script");if(c.match("document.write"))return console&&console.log&&console.log("Script contains document.write. Can\u2019t be executed correctly. Code skipped ",d),!1;b.type="text/javascript";b.id=d.id;""!==a&&(b.src=a,b.async=!1);if(""!==c)try{b.appendChild(document.createTextNode(c))}catch(l){b.text=c}g.appendChild(b);(g instanceof HTMLHeadElement||
g instanceof HTMLBodyElement)&&g.contains(b)&&g.removeChild(b);return!0}},{}],4:[function(a,e,f){var d=a("../foreach-els");e.exports=function(c,a,g,b){a="string"===typeof a?a.split(" "):a;a.forEach(function(a){d(c,function(c){c.addEventListener(a,g,b)})})}},{"../foreach-els":7}],5:[function(a,e,f){var d=a("../foreach-els");e.exports=function(c,a,g){a="string"===typeof a?a.split(" "):a;a.forEach(function(b){var a=document.createEvent("HTMLEvents");a.initEvent(b,!0,!0);a.eventName=b;g&&Object.keys(g).forEach(function(b){a[b]=
g[b]});d(c,function(b){var c=!1;b.parentNode||b===document||b===window||(c=!0,document.body.appendChild(b));b.dispatchEvent(a);c&&b.parentNode.removeChild(b)})})}},{"../foreach-els":7}],6:[function(a,e,f){var d=a("./foreach-els"),c=a("./eval-script");e.exports=function(a){"script"===a.tagName.toLowerCase()&&c(a);d(a.querySelectorAll("script"),function(a){a.type&&"text/javascript"!==a.type.toLowerCase()||(a.parentNode&&a.parentNode.removeChild(a),c(a))})}},{"./eval-script":3,"./foreach-els":7}],7:[function(a,
e,f){e.exports=function(a,c,h){return a instanceof HTMLCollection||a instanceof NodeList||a instanceof Array?Array.prototype.forEach.call(a,c,h):c.call(h,a)}},{}],8:[function(a,e,f){var d=a("./foreach-els");e.exports=function(c,a,g,b){b=b||document;c.forEach(function(c){d(b.querySelectorAll(c),a,g)})}},{"./foreach-els":7}],9:[function(a,e,f){e.exports=function(){return window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/)}},
{}],10:[function(a,e,f){var d=a("./switches");e.exports=function(c){c=c||{};c.elements=c.elements||"a[href]";c.selectors=c.selectors||["title",".js-Pjax"];c.switches=c.switches||{};c.switchesOptions=c.switchesOptions||{};c.history="undefined"===typeof c.history?!0:c.history;c.scrollTo="undefined"===typeof c.scrollTo?0:c.scrollTo;c.scrollRestoration="undefined"!==typeof c.scrollRestoration?c.scrollRestoration:!0;c.debug=c.debug||!1;c.timeout=c.timeout||0;c.currentUrlFullReload="undefined"===typeof c.currentUrlFullReload?
!1:c.currentUrlFullReload;c.switches.head||(c.switches.head=d.switchElementsAlt);c.switches.body||(c.switches.body=d.switchElementsAlt);return c}},{"./switches":17}],11:[function(a,e,f){function d(b,c){if(1<c.which||c.metaKey||c.ctrlKey||c.shiftKey||c.altKey)return"modifier";if(b.protocol!==window.location.protocol||b.host!==window.location.host)return"external";if(b.hash&&b.href.replace(b.hash,"")===window.location.href.replace(location.hash,""))return"anchor";if(b.href===window.location.href.split("#")[0]+
"#")return"anchor-empty"}var c=a("../events/on"),h=a("../util/clone"),g=function(b,c){if(!c.defaultPrevented&&!1!==c.returnValue){var a=h(this.options),g=d(b,c);g?b.setAttribute("data-pjax-state",g):(c.preventDefault(),this.options.currentUrlFullReload&&b.href===window.location.href.split("#")[0]?(b.setAttribute("data-pjax-state","reload"),this.reload()):(b.setAttribute("data-pjax-state","load"),a.triggerElement=b,this.loadUrl(b.href,a)))}};e.exports=function(b){var a=this;b.setAttribute("data-pjax-state",
"");c(b,"click",function(c){g.call(a,b,c)});c(b,"keyup",function(c){13===c.keyCode&&g.call(a,b,c)}.bind(this))}},{"../events/on":4,"../util/clone":19}],12:[function(a,e,f){var d=a("../util/clone"),c=a("../uniqueid"),h=a("../events/trigger");e.exports=function(a,b,e,f){f=d(f||this.options);f.request=b;if(!1===a)h(document,"pjax:complete pjax:error",f);else{var g=window.history.state||{};window.history.replaceState({url:g.url||window.location.href,title:g.title||document.title,uid:g.uid||c(),scrollPos:[document.documentElement.scrollLeft||
document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop]},document.title,window.location.href);g=e;b.responseURL?e!==b.responseURL&&(e=b.responseURL):b.getResponseHeader("X-PJAX-URL")?e=b.getResponseHeader("X-PJAX-URL"):b.getResponseHeader("X-XHR-Redirected-To")&&(e=b.getResponseHeader("X-XHR-Redirected-To"));b=document.createElement("a");b.href=g;g=b.hash;b.href=e;g&&!b.hash&&(b.hash=g,e=b.href);this.state.href=e;this.state.options=f;try{this.loadContent(a,f)}catch(n){h(document,
"pjax:error",f);if(this.options.debug)throw n;console&&console.error&&console.error("Pjax switch fail: ",n);return this.latestChance(e)}}}},{"../events/trigger":5,"../uniqueid":18,"../util/clone":19}],13:[function(a,e,f){e.exports=function(){this.options.debug&&console&&("function"===typeof console.log?console.log.apply(console,arguments):console.log&&console.log(arguments))}},{}],14:[function(a,e,f){e.exports=function(a){switch(a.tagName.toLowerCase()){case "a":a.hasAttribute("data-pjax-state")||
this.attachLink(a);break;case "form":a.hasAttribute("data-pjax-state")||this.attachForm(a);break;default:throw"Pjax can only be applied on <a> or <form> submit";}}},{}],15:[function(a,e,f){e.exports=function(a,c,e){c=c||{};var d=c.requestOptions||{},b=(d.requestMethod||"GET").toUpperCase();var h=d.requestParams||null;d=d.formData||null;var f=null,k=new XMLHttpRequest,n=c.timeout||0;k.onreadystatechange=function(){4===k.readyState&&(200===k.status?e(k.responseText,k,a,c):0!==k.status&&e(null,k,a,c))};
k.onerror=function(b){console.log(b);e(null,k,a,c)};k.ontimeout=function(){e(null,k,a,c)};if(h&&h.length)switch(h=h.map(function(b){return b.name+"="+b.value}).join("&"),b){case "GET":a=a.split("?")[0];a+="?"+h;break;case "POST":f=h}else d&&(f=d);k.open(b,a,!0);k.timeout=n;f&&"POST"===b&&!d&&k.setRequestHeader("Content-Type","application/x-www-form-urlencoded");k.send(f);return k}},{}],16:[function(a,e,f){var d=a("./foreach-els"),c=a("./switches");e.exports=function(a,e,b,f,r,k){var g=[];b.forEach(function(b){var h=
f.querySelectorAll(b),q=r.querySelectorAll(b);this.log&&this.log("Pjax switch",b,h,q);if(h.length!==q.length)throw"DOM doesn\u2019t look the same on new loaded page: \u2019"+b+"\u2019 - new "+h.length+", old "+q.length;d(h,function(d,h){var f=q[h];this.log&&this.log("newEl",d,"oldEl",f);f=a[b]?a[b].bind(this,f,d,k,e[b]):c.outerHTML.bind(this,f,d,k);g.push(f)},this)},this);this.state.numPendingSwitches=g.length;g.forEach(function(b){b()})}},{"./foreach-els":7,"./switches":17}],17:[function(a,e,f){var d=
a("./events/on");e.exports={outerHTML:function(c,a){c.outerHTML=a.outerHTML;this.onSwitch()},innerHTML:function(c,a){c.innerHTML=a.innerHTML;""===a.className?c.removeAttribute("class"):c.className=a.className;this.onSwitch()},switchElementsAlt:function(a,d){a.innerHTML=d.innerHTML;if(d.hasAttributes())for(var c=d.attributes,b=0;b<c.length;b++)a.attributes.setNamedItem(c[b].cloneNode());this.onSwitch()},replaceNode:function(a,d){a.parentNode.replaceChild(d,a);this.onSwitch()},sideBySide:function(a,
e,g,b){var c=Array.prototype.forEach,f=[],h=[],n=document.createDocumentFragment(),p=0,m=function(b){b.target===b.currentTarget&&(p--,0>=p&&f&&(f.forEach(function(b){b.parentNode&&b.parentNode.removeChild(b)}),h.forEach(function(b){b.className=b.className.replace(b.getAttribute("data-pjax-classes"),"");b.removeAttribute("data-pjax-classes")}),f=h=null,this.onSwitch()))}.bind(this);b=b||{};c.call(a.childNodes,function(a){f.push(a);a.classList&&!a.classList.contains("js-Pjax-remove")&&(a.hasAttribute("data-pjax-classes")&&
(a.className=a.className.replace(a.getAttribute("data-pjax-classes"),""),a.removeAttribute("data-pjax-classes")),a.classList.add("js-Pjax-remove"),b.callbacks&&b.callbacks.removeElement&&b.callbacks.removeElement(a),b.classNames&&(a.className+=" "+b.classNames.remove+" "+(g.backward?b.classNames.backward:b.classNames.forward)),p++,d(a,"animationend webkitAnimationEnd MSAnimationEnd oanimationend",m,!0))});c.call(e.childNodes,function(a){if(a.classList){var c="";b.classNames&&(c=" js-Pjax-add "+b.classNames.add+
" "+(g.backward?b.classNames.forward:b.classNames.backward));b.callbacks&&b.callbacks.addElement&&b.callbacks.addElement(a);a.className+=c;a.setAttribute("data-pjax-classes",c);h.push(a);n.appendChild(a);p++;d(a,"animationend webkitAnimationEnd MSAnimationEnd oanimationend",m,!0)}});a.className=e.className;a.appendChild(n)}}},{"./events/on":4}],18:[function(a,e,f){e.exports=function(){var a=0;return function(){var c="pjax"+(new Date).getTime()+"_"+a;a++;return c}}()},{}],19:[function(a,e,f){e.exports=
function(a){if(null===a||"object"!==typeof a)return a;var c=a.constructor(),d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]);return c}},{}],20:[function(a,e,f){e.exports=function(a,c,e){for(var d=0;d<c.length;d++)for(var b=a.querySelectorAll(c[d]),f=0;f<b.length;f++)if(b[f].contains(e))return!0;return!1}},{}],21:[function(a,e,f){e.exports=function(a){if(null==a)return null;for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var b in e)Object.prototype.hasOwnProperty.call(e,
b)&&(c[b]=e[b])}return c}},{}],22:[function(a,e,f){e.exports=function(){}},{}]},{},[1])(1)});

var pjax = new Pjax({
  selectors: ["body"],
})